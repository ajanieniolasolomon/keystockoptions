webpackJsonp([39],{1162:function(t,e,i){"use strict";function o(t){var e=t.className,i=t.icon,o=void 0===i?"":i,n=t.onClick,r=t.title;return a.createElement("span",{title:r,className:e,dangerouslySetInnerHTML:{__html:o},onClick:n})}Object.defineProperty(e,"__esModule",{value:!0});var a=i(46);e.Icon=o},1370:function(t,e,i){"use strict";function o(){return a.enabled("saveload_requires_authentication")&&!window.is_authenticated?Promise.resolve([]):new Promise(function(t){s.getCharts(function(e){t(e)})})}var a,n,r,s,l,c,d,h;Object.defineProperty(e,"__esModule",{value:!0}),a=i(1),n=i(2336),r=i(2337),s=i(605),l=i(2339),c=i(43),d=i(42),h=function(){function t(t){void 0===t&&(t=null);var e=this;this._favoriteChartsService=new n.FavoriteChartsService(c.TVXWindowEvents,d),this._chartWidgetCollection=null,this._dialog=new r,this._getChartEntry=function(t){return{id:t.id,url:t.url,title:t.name,symbol:t.short_symbol,interval:t.interval,toolsCount:0,modified:t.modified_iso,active:function(){return e._isActiveChart(t.id)},openAction:function(){return s.loadChart(t)},deleteAction:function(i,o){l.deleteChart(o,t.image_url,function(){e._deleteChart(t.id),i.resolve()},i.reject.bind(i))},favoriteAction:e._updateFavorites}},this._updateFavorites=function(t){return e._favoriteChartsService.set(t)},this._isActiveChart=function(t){return null!==e._chartWidgetCollection&&t===e._chartWidgetCollection.metaInfo.id.value()},this._deleteChart=function(t){e._isActiveChart(t)&&(a.enabled("saveload_storage_customization")?null!==e._chartWidgetCollection&&e._chartWidgetCollection.clearChartMetaInfo():location.href="/chart/")},this._chartWidgetCollection=t}return t.prototype.showLoadDialog=function(){var t=this;o().then(function(e){return e.map(t._getChartEntry)}).then(function(e){t._dialog.show(e,t._favoriteChartsService.get())})},t}(),e.LoadChartService=h},1882:function(t,e,i){"use strict";function o(t){void 0===t&&(t=[]);var e=t.map(function(t){return T[t]})||[u.STYLE_CANDLES,u.STYLE_RENKO,u.STYLE_KAGI,u.STYLE_PNF];return p.isOnFeaturePage()&&!d.enabled("charting_library_base")&&(e=[]),d.enabled("widget")&&(e=[u.STYLE_BARS,u.STYLE_CANDLES,u.STYLE_AREA]),e}var a,n,r,s,l,c,d,h,u,p,m,v,f,_,g,b,y,S,C,w,E,T,W,I,L;Object.defineProperty(e,"__esModule",{value:!0}),a=i(4),i(14),n=i(46),r=i(447),s=i(456),l=i(405),c=i(60),d=i(1),h=i(102),u=i(123),p=i(29),m=i(128),v=i(3067),f=i(24),_=i(3080),g=i(3081),b=i(523),y=i(3082),S=i(43),C=i(42),w=i(3083),E=i(3084),e.HEADER_TOOLBAR_HEIGHT_EXPANDED=parseInt(E["css-value-header-toolbar-height"]),e.HEADER_TOOLBAR_HEIGHT_COLLAPSED=3,T={Area:u.STYLE_AREA,Bars:u.STYLE_BARS,Candles:u.STYLE_CANDLES,"Heiken Ashi":u.STYLE_HEIKEN_ASHI,"Hollow Candles":u.STYLE_HOLLOW_CANDLES,Line:u.STYLE_LINE},W=[],I=["full","medium"],L=function(t){function i(e){var i,a,n,r,s=t.call(this,e)||this;return s._templateSyncEmitter=new c,s._saveLoadSyncEmitter=new c,s._handleFullWidthChange=function(t){s._fullWidth=t,s.setState({measureValid:!1})},s._handleFavoritesWidthChange=function(t){s._favoritesWidth=t,s.setState({measureValid:!1})},
s._handleCollapseWidthChange=function(t){s._collapseWidth=t,s.setState({measureValid:!1})},s._handleMeasure=function(t){var e=t.width;s.setState({availableWidth:e,measureValid:!1})},s._showScrollbarWhen=e.allowedModes.slice(-1),i=e.chartWidgetCollection,a=e.chartChangesWatcher,s._chartChangesWatcher=a,n=o(s.props.defaultFavoriteStyles),s._favoriteChartStylesService=new _.FavoriteChartStylesService(S.TVXWindowEvents,C,n),r=b.getDefaultFavoriteIntervals(s.props.defaultFavoriteIntervals),s._favoriteIntervalsService=new g.FavoriteIntervalsService(S.TVXWindowEvents,C,r),s._customIntervalsService=new y.CustomIntervalsService(S.TVXWindowEvents,C),s.state={isVisible:!0,availableWidth:0,displayMode:"full",measureValid:!1,leftCustomButtons:[],rightCustomButtons:[]},s._readOnly=i.readOnly(),s._features={accentScreenshotButton:!!s.props.accentScreenshot,allowFavoriting:d.enabled("items_favoriting"),showIdeasButton:!!s.props.ideas,showLaunchInPopupButton:!!s.props.popupButton,allowSymbolSearchSpread:d.enabled("header_symbol_search")&&!d.enabled("charting_library_base"),allowToolbarHiding:d.enabled("collapsible_header")},s._setDisplayMode=m(s._setDisplayMode,100),s._negotiateResizer(),s}return a.__extends(i,t),i.prototype.getChildContext=function(){var t=this.props,e=t.tools,i=t.windowMessageService,o=t.chartWidgetCollection,a=t.chartApiInstance,n=t.availableTimeFrames;return{tools:e,isFundamental:t.isFundamental,chartWidgetCollection:o,windowMessageService:i,chartApiInstance:a,availableTimeFrames:n,favoriteStudyTemplatesService:t.favoriteStudyTemplatesService,studyTemplates:t.studyTemplates,saveChartService:t.saveChartService,loadChartService:t.loadChartService,favoriteChartStylesService:this._favoriteChartStylesService,favoriteIntervalsService:this._favoriteIntervalsService,customIntervalsService:this._customIntervalsService,chartChangesWatcher:this._chartChangesWatcher}},i.prototype.componentDidUpdate=function(t,e){var i=this.state,o=i.isVisible,a=i.measureValid;o!==e.isVisible&&(h.emit("toggle_header",o),this._negotiateResizer()),a||this._setDisplayMode()},i.prototype.render=function(){var t,e=this.props,i=(e.resizerBridge,e.allowedModes),o=a.__rest(e,["resizerBridge","allowedModes"]),r=this.state,c=r.displayMode,d=r.availableWidth,h=r.isVisible,u=r.leftCustomButtons,p=r.rightCustomButtons,m=a.__assign({features:this._features,readOnly:this._readOnly,isFake:!1,templateSyncEmitter:this._templateSyncEmitter,saveLoadSyncEmitter:this._saveLoadSyncEmitter,width:d,leftCustomButtons:u,rightCustomButtons:p},o),f=a.__assign({},m,{isFake:!0,showScrollbarWhen:W});return n.createElement("div",{className:l(w.toolbar,(t={},t[w.isHidden]=!h,t))},n.createElement("div",{className:w.overflowWrap},n.createElement(s,{onMeasure:this._handleMeasure,whitelist:["width"]},n.createElement(v.ToolbarInner,a.__assign({showScrollbarWhen:this._showScrollbarWhen,displayMode:c},m))),i.includes("full")&&n.createElement(v.ToolbarInner,a.__assign({displayMode:"full",onWidthChange:this._handleFullWidthChange
},f)),i.includes("medium")&&n.createElement(v.ToolbarInner,a.__assign({displayMode:"medium",onWidthChange:this._handleFavoritesWidthChange},f)),i.includes("small")&&n.createElement(v.ToolbarInner,a.__assign({displayMode:"small",onWidthChange:this._handleCollapseWidthChange},f))))},i.prototype.addButton=function(t){var e,i,o,a,n,r;return void 0===t&&(t="left"),e=new f(0),i=$('<div class="apply-common-tooltip '+w.customButton+'">'),o={key:+new Date,jquery:i,width:e},a=this.state,n=a.leftCustomButtons,r=a.rightCustomButtons,"left"===t?this.setState({leftCustomButtons:n.concat([o])}):this.setState({rightCustomButtons:r.concat([o])}),i},i.prototype._negotiateResizer=function(){this.props.resizerBridge.negotiateHeight(this.state.isVisible?e.HEADER_TOOLBAR_HEIGHT_EXPANDED:e.HEADER_TOOLBAR_HEIGHT_COLLAPSED)},i.prototype._setDisplayMode=function(){var t,e,i=this.state.availableWidth,o=this.props.allowedModes,a=(e={},e.full=this._fullWidth,e.medium=this._favoritesWidth,e.small=this._collapseWidth,e),n=o.map(function(t){return a[t]}),r=n.findIndex(function(t){return i>=t});-1===r&&(r=o.length-1),t=o[r],this.setState({measureValid:!0,displayMode:t})},i.childContextTypes={tools:r.object.isRequired,isFundamental:r.bool,chartApiInstance:r.object,availableTimeFrames:r.func,chartWidgetCollection:r.object,windowMessageService:r.object,favoriteChartStylesService:r.object,favoriteIntervalsService:r.object,customIntervalsService:r.object,favoriteStudyTemplatesService:r.object,studyTemplates:r.object,chartChangesWatcher:r.object,saveChartService:r.object,loadChartService:r.object},i.defaultProps={allowedModes:I},i}(n.PureComponent),e.HeaderToolbar=L},1883:function(t,e,i){"use strict";function o(t,e,i,o){return c.__awaiter(this,void 0,void 0,function(){var a;return c.__generator(this,function(n){return a=new d.SaveRenameDialog({fields:[new h.InputField({name:S,label:t+":",error:e,maxLength:64})],title:i}),void 0!==o&&a.setField(S,o),[2,a.show().then(function(t){return t[S]})]})})}function a(t){return c.__awaiter(this,void 0,void 0,function(){return c.__generator(this,function(e){return[2,o(y.labelRename,y.error,y.titleRename,t)]})})}function n(t){return c.__awaiter(this,void 0,void 0,function(){return c.__generator(this,function(e){return[2,o(y.labelRename,y.error,y.titleCopy,y.valueCopy.format(t))]})})}function r(t){return c.__awaiter(this,void 0,void 0,function(){return c.__generator(this,function(e){return[2,o(y.labelRename,y.error,y.titleNew,t)]})})}function s(t){"/chart/"===location.pathname&&(location.href="/chart/"+t)}function l(){return c.__awaiter(this,void 0,void 0,function(){return c.__generator(this,function(t){return[2,new Promise(function(t){p.enabled("saved_charts_count_restriction")&&!window.user.is_pro?u.getCharts(function(e){t(e.length<5)}):t(!0)})]})})}var c,d,h,u,p,m,v,f,_,g,b,y,S,C,w;Object.defineProperty(e,"__esModule",{value:!0}),c=i(4),d=i(1901),h=i(1900),u=i(605),p=i(1),m=i(23),v=i(3085),f=i(36),_=i(3086),g=i(102),b=i(22),y={labelName:window.t("Chart layout name"),
labelRename:window.t("Enter a new chart layout name"),error:window.t("Please enter chart layout name"),titleNew:window.t("Save New Chart Layout"),titleRename:window.t("Rename Chart Layout"),titleCopy:window.t("Copy Chart Layout"),valueCopy:window.t("{0} copy",{context:"ex: AAPL chart copy"})},S="chart-title",C=6e4,w=function(){function t(t,e){this._autosaveTimer=null,this._chartWidgetCollection=t,this._chartSaver=e,this._chartSaver.chartSizeLimitExceeded().subscribe(this,this._onChartSizeLimitExceeded),this._chartChangesWatcher=new _.ChartChangesWatcher(t.undoHistory,e,g),this._chartChangesWatcher.getOnChange().subscribe(this,this._onStateChanged)}return t.prototype.cloneChart=function(){return c.__awaiter(this,void 0,void 0,function(){var t,e,i;return c.__generator(this,function(o){switch(o.label){case 0:return t=this._chartWidgetCollection,[4,l()];case 1:return e=o.sent(),e?[4,n(t.metaInfo.name.value())]:[3,3];case 2:return i=o.sent(),this._saveCurrentChartAsNewWithTitle(i),[3,5];case 3:return[4,f.createGoProDialog({feature:"savedChartsLimit"})];case 4:o.sent().open(),o.label=5;case 5:return[2]}})})},t.prototype.renameChart=function(){return c.__awaiter(this,void 0,void 0,function(){var t,e,i;return c.__generator(this,function(o){switch(o.label){case 0:return t=this._chartWidgetCollection,e=t.metaInfo.name.value(),[4,a(e)];case 1:return i=o.sent(),t.metaInfo.name.setValue(i),this._doSave(),[2]}})})},t.prototype.saveNewChart=function(t,e,i){return c.__awaiter(this,void 0,void 0,function(){var o,a,n,s;return c.__generator(this,function(c){switch(c.label){case 0:return o=this._chartWidgetCollection,a=o.metaInfo.name.value(),[4,l()];case 1:return n=c.sent(),n?[4,r(a)]:[3,3];case 2:return s=c.sent(),o.metaInfo.name.setValue(s),this._doSave(t,e,i),[3,5];case 3:return[4,f.createGoProDialog({feature:"savedChartsLimit"})];case 4:c.sent().open(),c.label=5;case 5:return[2]}})})},t.prototype.saveExistentChart=function(t,e,i){this._doSave(t,e,i)},t.prototype.saveChartOrShowTitleDialog=function(t,e,i){null!==this._chartWidgetCollection.metaInfo.id.value()?this.saveExistentChart(t,e,i):this.saveNewChart(t,e,i)},t.prototype.whenReadyToSave=function(t){this._chartSaver.whenReadyToSave(t)},t.prototype.saveToJSON=function(){return this._chartSaver.saveToJSON()},t.prototype.saveChartSilently=function(t,e,i,o){this._chartSaver.saveChartSilently(t,e,i,o)},t.prototype._onStateChanged=function(t){t?b.isFeatureEnabled("save_every_minute")?this._startAutosave():this._restartAutosave():this._stopAutosave()},t.prototype._saveCurrentChartAsNewWithTitle=function(t){var e=this._chartWidgetCollection;p.enabled("saveload_storage_customization")?(e.metaInfo.uid.deleteValue(),e.metaInfo.id.deleteValue(),e.metaInfo.name.setValue(t),this._doSave()):window.open("/chart/?clone="+e.metaInfo.uid.value()+"&name="+encodeURIComponent(t),"_blank")},t.prototype._doSave=function(t,e,i){var o=this._chartWidgetCollection;void 0!==t&&t(),this._chartSaver.saveChartSilently(function(t){m.trackEvent("GUI","Save Chart Layout"),s(o.metaInfo.uid.value()),
v.instance&&v.instance.updateView(),void 0!==e&&e(t)},!1,function(){void 0!==i&&i()})},t.prototype._onChartSizeLimitExceeded=function(){var t=this._chartWidgetCollection.activeChartWidget.value();i.e(99).then(function(e){(0,i(3087).showSizeLimitExceededDialog)(t)}.bind(null,i)).catch(i.oe)},t.prototype._restartAutosave=function(){this._stopAutosave(),this._startAutosave()},t.prototype._startAutosave=function(){var t=this;p.enabled("charts_auto_save")&&null===this._autosaveTimer&&(this._autosaveTimer=setTimeout(function(){t._autosaveTimer=null,t._chartWidgetCollection.metaInfo.id.value()&&t._doSave()},C))},t.prototype._stopAutosave=function(){null!==this._autosaveTimer&&(clearInterval(this._autosaveTimer),this._autosaveTimer=null)},t}(),e.SaveChartService=w},1900:function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a;Object.defineProperty(e,"__esModule",{value:!0}),a=function(){function t(t,e){var i,o;for(i=0;i<e.length;i++)o=e[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),e.InputField=function(){function t(e){var i=e.label,a=e.name,n=e.maxLength,r=e.error,s=void 0===r?"":r;o(this,t),this._name=a,this._$field=$('<label class="tv-rename-chart-dialog__field">\n\t\t\t\t<span class="tv-rename-chart-dialog__label">'+i+'</span>\n\t\t\t\t<input class="tv-control-input" type="text" name="'+a+'" maxlength="'+n+'"/>\n\t\t\t</label>'),this._$input=this._$field.find("input"),this._error=s}return a(t,[{key:"appendTo",value:function(t){t.append(this._$field)}},{key:"focus",value:function(){return this._$input.focus()}},{key:"select",value:function(){return this.focus().select()}},{key:"value",set:function(t){this._$input.val(t)},get:function(){return this._$input.val()}},{key:"name",get:function(){return this._name}},{key:"valid",get:function(){return!!this._$input.val().trim()}},{key:"error",set:function(t){this._error=t},get:function(){return this._error}}]),t}()},1901:function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a,n;Object.defineProperty(e,"__esModule",{value:!0}),e.SaveRenameDialog=void 0,a=function(){function t(t,e){var i,o;for(i=0;i<e.length;i++)o=e[i],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),i(1902),n=i(50),e.SaveRenameDialog=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.fields,a=e.title,n=void 0===a?"":a,r=e.destroyOnClose,s=void 0===r||r,l=e.modal,c=void 0!==l&&l;o(this,t),this._$form=$("<div></div>"),this._fields=i,this._appendFieldsToForm(),this._title=n,this._destroyOnClose=s,this._modal=c}return a(t,[{key:"setField",value:function(t,e){this._fields.find(function(e){return e.name===t}).value=e}},{key:"show",value:function(){
var t=this,e=this._createDialog(),i=new Promise(function(i){e.on("action:submit",function(e){return t._onSubmit(e,i)})});return e.open(),e.on("beforeClose",this._unmountFields.bind(this)),this._fields[0].select(),i}},{key:"_appendFieldsToForm",value:function(){var t=this;this._fields.forEach(function(e){e.appendTo(t._$form)})}},{key:"_createDialog",value:function(){return(0,n.createDialog)({type:this._modal?"modal":"popup",title:this._title,content:this._$form,actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions i-align_right tv-dialog__section--no-border">',width:470,destroyOnClose:this._destroyOnClose,actions:[{name:"submit",type:"primary",text:$.t("Save"),key:13,addClass:"js-submit-button"},{name:"cancel",type:"default",text:$.t("Cancel"),method:"close",addClass:"js-cancel-button"}]})}},{key:"_onSubmit",value:function(t,e){var i=this._validate();i?(t.error(i.error),i.focus()):(e(this._collectValues(),t),t.close())}},{key:"_validate",value:function(){return this._fields.find(function(t){return!t.valid})}},{key:"_collectValues",value:function(){return this._fields.reduce(function(t,e){return t[e.name]=e.value,t},{})}},{key:"_unmountFields",value:function(){this._fields.forEach(function(t){t.unmount&&t.unmount()})}}]),t}()},1902:function(t,e){},1913:function(t,e,i){"use strict";function o(t){var e,i=t.icon,o=t.isActive,c=t.isOpened,d=t.isDisabled,h=t.onClick,u=t.text,p=t.textBeforeIcon,m=t.title,v=t.theme,f=void 0===v?l:v,_=t.className,g=t.forceInteractive,b=a.__rest(t,["icon","isActive","isOpened","isDisabled","onClick","text","textBeforeIcon","title","theme","className","forceInteractive"]),y=r(_,f.button,"apply-common-tooltip",(e={},e[f.isActive]=o,e[f.isOpened]=c,e[f.isInteractive]=(g||!!h)&&!d,e[f.isDisabled]=d,e)),S=i&&("string"==typeof i?n.createElement(s.Icon,{className:f.icon,icon:i}):n.cloneElement(i,{className:f.icon}));return n.createElement("div",a.__assign({},b,{className:y,onClick:d?void 0:h,title:m}),p&&u&&n.createElement("div",{className:r("js-button-text",f.text)},u),S,!p&&u&&n.createElement("div",{className:r("js-button-text",f.text)},u))}var a,n,r,s,l;Object.defineProperty(e,"__esModule",{value:!0}),a=i(4),n=i(46),r=i(405),s=i(1162),l=i(1925),e.ToolWidgetButton=o},1925:function(t,e){t.exports={button:"button-2ioYhFEY-",isInteractive:"isInteractive-20uLObIc-",hovered:"hovered-3perbaxJ-",isActive:"isActive-22S-lGpa-",isOpened:"isOpened-p-Ume5l9-",isDisabled:"isDisabled-1_tmrLfP-",text:"text-1sK7vbvh-",icon:"icon-beK_KS0k-"}},2048:function(t,e,i){"use strict";var o,a,n,r;Object.defineProperty(e,"__esModule",{value:!0}),o=i(4),a=i(3),n=function(){function t(t,e,i,o,n){var r=this;this._onChange=new a,this._handleChange=function(){r._onChange.fire(r.get())},this._crossTabEvents=t,this._jsonKeyValueStore=e,this.CROSSTAB_EVENT_NAME=i,this.JSON_STORE_KEY=o,this.defaultStoreValue=this._serialize(n),this._subscribe()}return t.prototype.get=function(){var t=this._jsonKeyValueStore.getJSON(this.JSON_STORE_KEY,this.defaultStoreValue);return this._deserialize(t)},
t.prototype.set=function(t){var e=this._serialize(t);this._jsonKeyValueStore.setJSON(this.JSON_STORE_KEY,e),this._crossTabEvents.emit(this.CROSSTAB_EVENT_NAME),this._onChange.fire(t)},t.prototype.getOnChange=function(){return this._onChange},t.prototype.destroy=function(){this._unsubscribe(),this._onChange.destroy()},t.prototype._subscribe=function(){this._crossTabEvents.on(this.CROSSTAB_EVENT_NAME,this._handleChange),this._jsonKeyValueStore.onSync.subscribe(this,this._handleChange)},t.prototype._unsubscribe=function(){this._crossTabEvents.off(this.CROSSTAB_EVENT_NAME,this._handleChange),this._jsonKeyValueStore.onSync.unsubscribe(this,this._handleChange)},t}(),e.AbstractJsonStoreService=n,r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype._serialize=function(t){return t},e.prototype._deserialize=function(t){return t},e}(n),e.CommonJsonStoreService=r},2336:function(t,e,i){"use strict";var o,a,n;Object.defineProperty(e,"__esModule",{value:!0}),o=i(4),a=i(2048),n=function(t){function e(e,i){return t.call(this,e,i,"FAVORITE_CHARTS_CHANGED","loadChartDialog.favorites",{})||this}return o.__extends(e,t),e}(a.CommonJsonStoreService),e.FavoriteChartsService=n},2337:function(t,e,i){"use strict";(function(e,o,a){function n(){this.title=$.t("Load Chart Layout"),this._removeDialogShown=!1,this.options={},this.matchedItems=[],this.itemsData=[],this.qs=new n.QuickSearch(this.fieldsExtractor,this.searchResult.bind(this)),this.sortObj=new n.SortObject(this.modifiedCompare),this.nameSort=new n.SortObject(this.nameCompare),this.symbolSort=new n.SortObject(this.symbolCompare),this.toolsSort=new n.SortObject(this.toolsCompare),this.offset=0,d.on("chart_loaded",n.onChartLoaded,this)}function r(t){return t&&t.classList.contains("js-item-link")}var s,l,c,d=i(102),h=i(50).createDialog,u=i(1185).createSearchControl,p=i(142).regExpEscape
;s='<div class="js-table-row tv-load-chart-dialog-table__row tv-load-chart-dialog-table__row--item {{^withFavs}}tv-load-chart-dialog-table__row--item-without-favs{{/withFavs}} {{#isActive}}i-active{{/isActive}}" data-id="{{id}}">{{#withFavs}}<div class="tv-load-chart-dialog-table__favorite-icon-container {{#starred}}i-starred{{/starred}}" ><span data-id="{{id}}" class="js-empty-star tv-load-chart-dialog-table__star-icon tv-load-chart-dialog-table__star-icon--empty" title="'+$.t("Add to favorites")+'">'+i(600)+'</span><span data-id="{{id}}" class="js-filled-star tv-load-chart-dialog-table__star-icon tv-load-chart-dialog-table__star-icon--filled" title="'+$.t("Remove from favorites")+'">'+i(598)+'</span></div>{{/withFavs}}<a href="/chart/{{url}}" class="tv-load-chart-dialog-table__column-wrapper js-item-link"><div class="js-column-name tv-load-chart-dialog-table__column tv-load-chart-dialog-table__column--item tv-load-chart-dialog-table__column-name">{{title}}</div><div class="js-column-modified tv-load-chart-dialog-table__column tv-load-chart-dialog-table__column--item tv-load-chart-dialog-table__column-modified">{{modifiedDate}}</div><div class="js-column-symbol tv-load-chart-dialog-table__column tv-load-chart-dialog-table__column--item tv-load-chart-dialog-table__column-symbol">{{chartSymbol}}</div></a><div data-id="{{id}}" class="js-remove-button tv-load-chart-dialog-table__column-name-action tv-load-chart-dialog-table__remove-icon" title="'+$.t("Delete chart layout")+'">'+i(140)+"</div></div>",l='<div class="tv-load-chart-dialog-table__row tv-load-chart-dialog-table__row--header"><div class="js-column-name tv-load-chart-dialog-table__column tv-load-chart-dialog-table__column--header tv-load-chart-dialog-table__column-name">'+$.t("Chart Layout Name")+'<span class="tv-caret tv-load-chart-dialog-table__caret"></span></div><div class="js-column-modified tv-load-chart-dialog-table__column tv-load-chart-dialog-table__column--header tv-load-chart-dialog-table__column-modified">'+$.t("Last Modified")+'<span class="tv-caret tv-load-chart-dialog-table__caret"></span></div><div class="js-column-symbol tv-load-chart-dialog-table__column tv-load-chart-dialog-table__column--header tv-load-chart-dialog-table__column-symbol">'+$.t("Active Symbol")+'<span class="tv-caret tv-load-chart-dialog-table__caret"></span></div></div>',c=50,n.onChartLoaded=function(){this.itemsData&&this.itemsData.length>0&&this._refreshChartsList()},n.QuickSearch=function(t,e){this.fieldsExtractor=t,this.callback=e,this.regExps=[]},n.QuickSearch.prototype.onInput=function(t){this.query=t,this.createRegexps(t),this.search()},n.QuickSearch.prototype.createRegexps=function(t){this.regExps=[],t&&this.regExps.push(RegExp("("+t.split("").map(function(t){return p(t)}).join(")(.*?)(")+")","i"))},n.QuickSearch.prototype.match=function(t){var e,i,o,a;for(e=0;e<this.regExps.length;e++)for(i=this.regExps[e],i.lastIndex=0,o=this.fieldsExtractor(t),a=0;a<o.length;a++)if(i.test(o[a]))return!0;return 0===this.regExps.length},n.QuickSearch.prototype.search=function(){
var t,e,i=[];for(t=0;t<this.items.length;t++)e=this.items[t],this.match(e)&&i.push(e);this.callback(i,this.regExps)},n.QuickSearch.prototype.setItems=function(t){this.items=t},n.SortObject=function(t,e){this.isAscending=!1,this.sortingFunc=t,this.getPredicate=function(){return function(t,e){var i=this.sortingFunc(t,e);return this.isAscending&&(i*=-1),i}.bind(this)},this.inverse=function(){this.isAscending=!this.isAscending},this.setIsAscending=function(t){return"boolean"==typeof t&&(this.isAscending=t),this.isAscending},this.reset=function(){this.isAscending=!1}},n.prototype.fieldsExtractor=function(t){var e=n.symbolWrap(t);return[t.title,e]},n.prototype.saveFavorite=function(t,e){e?this.favorites[t]=e:delete this.favorites[t]},n.prototype.filterFavorites=function(){var t={};this.itemsData.map(function(e){this.favorites.hasOwnProperty(e.id)&&(t[e.id]=!0)}.bind(this)),this.favorites=t},n.prototype.getFavorite=function(t){return this.favorites.hasOwnProperty(t)},n.prototype._onFavoriteClicked=function(t,e,i){this.saveFavorite(t.id,e),this.filterFavorites(),this.fillList(),t.favoriteAction(this.favorites),i.preventDefault()},n.prototype._onItemClicked=function(t,e){e.defaultPrevented||(e.preventDefault(),t.openAction())},n.prototype._onRemoveButtonClicked=function(t,e){var i=this,o=$.Deferred();this._removeDialogShown=!0,o.done(function(){i.removeItem(t)}).always(function(){setTimeout(function(){i._removeDialogShown=!1})}),t.deleteAction(o,t.title),e.preventDefault()},n.prototype._createListItem=function(t){return e.render(s,{id:t.id,isActive:t.active(),title:t.title,url:t.url,withFavs:o.enabled("items_favoriting"),starred:this.getFavorite(t.id),modifiedDate:a.unix(t.modified).format("L LT"),chartSymbol:""===t.symbol?"multiple charts":t.symbol+", "+t.interval})},n.prototype.removeItem=function(t){var e=this.itemsData.indexOf(t);e>-1&&this.itemsData.splice(e,1),this.setChartsData(this.itemsData)},n.prototype.modifiedCompare=function(t,e){var i=t.modified,o=e.modified;return a(o).diff(a(i))},n.prototype.nameCompare=function(t,e){return t.title.localeCompare(e.title)},n.symbolWrap=function(t){return""===t.symbol?"multiple charts":t.symbol+" "+t.interval},n.prototype.symbolCompare=function(t,e){return n.symbolWrap(t).localeCompare(n.symbolWrap(e))},n.prototype.toolsCompare=function(t,e){var i=t.toolsCount,o=e.toolsCount;return i<o?-1:i===o?0:1},n.prototype.sortClick=function(t){this.setSort($(t.target).data("sort"),!0),this.fillList()},n.prototype.setSort=function(t,e){var i,o,a={field:TVSettings.getValue("loadChartDialog.sort.field")||"modified",isAscending:TVSettings.getValue("loadChartDialog.sort.asc")||"0"},n=t||a.field,r=e?"0"===a.isAscending?"1":"0":a.isAscending;this.currentSortObj&&!(i=n!==a.field)||(this.currentSortObj="name"===n?this.nameSort:"symbol"===n?this.symbolSort:"tools"===n?this.toolsSort:this.sortObj,i&&TVSettings.setValue("loadChartDialog.sort.field",n)),this.currentSortObj.setIsAscending("1"===r),r!==a.isAscending&&TVSettings.setValue("loadChartDialog.sort.asc",r),o=this,
$.each(this.header.children(".tv-load-chart-dialog-table__column--header"),function(){var t=$(this),e=t.data("sort")===n;t.removeClass("i-active i-dropped"),e&&t.addClass("i-active "+(o.currentSortObj.isAscending?"":"i-dropped"))})},n.prototype.sortList=function(){var t,e=[],i=[];this.matchedItems.map(function(t){this.favorites.hasOwnProperty(t.id)?e.push(t):i.push(t)}.bind(this)),void 0!==this.currentSortObj&&(t=this.currentSortObj.getPredicate(),i.sort(t),e.sort(t)),this.matchedItems=e.concat(i)},n.prototype.showMoreData=function(){var t,e,i;if(!(this.offset>=this.matchedItems.length)){for(t=Math.min(this.offset+c,this.matchedItems.length),e="",i=this.offset;i<t;++i)e+=this._createListItem(this.matchedItems[i]);this.itemsList[0].insertAdjacentHTML("beforeend",e),this.offset+=c}},n.prototype.fillList=function(){this.sortList(),this.offset=0,this.itemsList[0].innerHTML="",this.showMoreData(),this.itemsListContainer.toggleClass("i-empty",0===this.itemsData.length),this.highlightOccurrences(this.qs.regExps),this._dialog&&(this.itemsListContainer[0].scrollTop=0)},n.prototype.searchResult=function(t,e){this.matchedItems=t,this.fillList()},n.prototype.updateChartsData=function(t){this.setChartsData(t)},n.prototype.updateFavoritesData=function(t){this.favorites=t,this.itemsList&&this.qs.search()},n.prototype.updateChartsAndFavoritesData=function(t,e){this.favorites=e,this.itemsList&&(this.itemsData=t,this.qs.setItems(t),this.qs.search())},n.prototype._refreshChartsList=function(){this.qs.setItems(this.itemsData),this.qs.search()},n.prototype.setChartsData=function(t){this.itemsList&&(this.itemsData=t,this.qs.setItems(t),this.qs.search())},n.prototype.layoutHeader=function(){var t=$(l);return t.find(".js-column-name").data("sort","name"),t.find(".js-column-modified").data("sort","modified"),t.find(".js-column-symbol").data("sort","symbol"),t.appendTo(this.content),t},n.prototype.resetSort=function(){this.sortObj.reset(),this.nameSort.reset(),this.symbolSort.reset(),this.toolsSort.reset(),this.currentSortObj=this.sortObj},n.prototype._findItemById=function(t){return t=parseInt(t),this.itemsData.find(function(e){return e.id===t})},n.prototype.show=function(t,e){var i=this,a=u({placeholder:$.t("Search")}),n=$("<div>");n.append(a.$control),n.append('<div class="tv-load-chart-dialog-table">'),this.content=$("<div>").appendTo(n.find(".tv-load-chart-dialog-table")),this.header=this.layoutHeader(),this.setSort(),this.itemsListContainer=$('<div class="tv-load-chart-dialog-table__items-list-container">').data({localScroll:!0}).appendTo(this.content),this.itemsList=$('<div class="tv-load-chart-dialog-table__items-list">').appendTo(this.itemsListContainer),$('<div class="tv-load-chart-dialog-table__empty-list-placeholder">').text($.t("There are no saved charts")).appendTo(this.itemsListContainer),this.itemsListContainer.on("click",".js-remove-button",function(t){var e=i._findItemById($(t.currentTarget).data("id"));i._onRemoveButtonClicked(e,t),t.stopPropagation()}).on("click",".js-table-row",function(t){
var e=i._findItemById($(t.currentTarget).data("id"));i._onItemClicked(e,t),t.preventDefault()}).on("scrolltoend",function(){i.showMoreData()}),o.enabled("items_favoriting")&&this.itemsListContainer.on("click",".js-empty-star",function(t){var e=i._findItemById($(t.currentTarget).data("id"));i._onFavoriteClicked(e,!0,t),t.stopPropagation()}).on("click",".js-filled-star",function(t){var e=i._findItemById($(t.currentTarget).data("id"));i._onFavoriteClicked(e,!1,t),t.stopPropagation()}),this.header.children(".tv-load-chart-dialog-table__column--header").click($.proxy(this,"sortClick")),a.inputChangedDelegate.subscribe(this.qs,this.qs.onInput),this.favorites=e,this.setChartsData(t),this.qs.onInput(""),this._dialog&&this._dialog.close(),this._dialog=h({title:this.title,width:600,height:550,content:n,contentWrapTemplate:"<div>",destroyOnClose:!0,withScroll:!1,isClickOutFn:function(){return!this._removeDialogShown&&void 0}.bind(this)}),this._disableContextMenu(),this._dialog.open()},n.prototype._disableContextMenu=function(){this._dialog.on("afterOpen",function(){this.content[0].addEventListener("contextmenu",function(t){t.target&&r(t.target.parentElement)||t.preventDefault()})}.bind(this))},n.prototype.highlightOccurrences=function(t){0!==t.length&&this.itemsList.children(".js-table-row").each(function(){var e,i=$(this).find(".js-column-name"),o=i.text();o=n.highlightText(o,t),i.html(o),e=$(this).find(".js-column-symbol"),o=e.text(),o=n.highlightText(o,t),e.html(o)})},n.highlightText=function(t,e){var i,o,a,n,r,s;if(t=$("<div>").text(t).html(),0===e.length)return t;for(i=0;i<e.length;i++){if(o=e[i],o.lastIndex=0,a="",n="",(r=o.exec(t))&&r.length)for(s=1;s<r.length;s++)a+=s%2?'<span class="i-match">$'+s+"</span>":"$"+s;if((n=t.replace(o,a))&&n!==t)return n}},t.exports=n}).call(e,i(21),i(1),i(47))},2338:function(t,e){},2339:function(t,e,i){"use strict";function o(t,e,i,o){var r=(0,a.createConfirmDialog)({type:"modal",content:document.createTextNode($.t("Do you really want to delete Chart Layout '{0}' ?").format(t)),addClass:"delete-chart-dialog"}),s=function(){var t=o;o=null,t&&t()};r.on("action:yes",function(){o=null,n.removeChart(e,i),r.close()}),r.on("action:no",s),r.on("afterClose",s),r.open()}var a,n;Object.defineProperty(e,"__esModule",{value:!0}),e.deleteChart=o,a=i(453),n=i(605)},2423:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 10" width="20" height="10"><path fill="none" stroke="currentColor" stroke-width="1.5" d="M2 1l8 8 8-8"/></svg>'},3067:function(t,e,i){"use strict";function o(t){return[t.findIndex(function(t){return n.isValidElement(t)&&!!t.key&&-1!==(""+t.key).indexOf("view-only-badge")}),t.findIndex(function(t){return n.isValidElement(t)&&!!t.key&&-1!==(""+t.key).indexOf("blue-screenshot")}),t.findIndex(function(t){return n.isValidElement(t)&&!!t.key&&-1!==(""+t.key).indexOf("popup")})].filter(function(t){return t>=0}).forEach(function(e){t=n.Children.map(t,function(t,i){var o,a,r;if(n.isValidElement(t))switch([e-1,e,e+1].indexOf(i)){case 0:o={noRightDecoration:!0},
t=n.cloneElement(t,o);break;case 1:a={noLeftDecoration:!0,noRightDecoration:!0},t=n.cloneElement(t,a);break;case 2:r={noLeftDecoration:!0},t=n.cloneElement(t,r)}return t})}),t}var a,n,r,s,l,c,d,h,u,p,m,v,f,_,g;Object.defineProperty(e,"__esModule",{value:!0}),a=i(4),n=i(46),r=i(447),s=i(405),i(92),l=i(1),c=i(22),d=i(3068),h=i(3070),u=i(3072),p=i(3074),m=i(3076),v=i(3078),f=i(3079),_=c.isFeatureEnabled("hide-copy-readonly"),g=function(t){function e(e){var i=t.call(this,e)||this;return i._activateSymbolSearchMode=function(){i._setMode(2)},i._activateNormalMode=function(){i._setMode(1)},i._handleInnerMeasure=function(t){var e=i.props.onWidthChange;e&&e(t)},i._processCustoms=function(t){var e=i.props.isFake,o=i.state.mode,r=i.context.tools;return t.map(function(t){return n.createElement(d.ToolWidgetGroupWrap,{className:s(1!==o&&v.hidden)},n.createElement(r.Custom,a.__assign({},t,{isFake:e})))})},i.state={mode:1},i}return a.__extends(e,t),e.prototype.render=function(){var t,e=this.context.tools,i=this.props,a=i.features,r=i.displayMode,c=i.chartSaver,g=i.studyMarket,b=i.readOnly,y=i.templateSyncEmitter,S=i.saveLoadSyncEmitter,C=i.leftCustomButtons,w=i.rightCustomButtons,E=i.showScrollbarWhen,T=i.width,W=void 0===T?0:T,I=i.isFake,L=void 0!==I&&I,k=this.state.mode,M=this._processCustoms(C),O=this._processCustoms(w),A=E.includes(r);return n.createElement("div",{className:s(v.inner,(t={},t[v.fake]=L,t))},n.createElement(m.HorizontalScroll,{isVisibleFade:Modernizr.touch&&A,isVisibleButtons:!Modernizr.touch&&A,isVisibleScrollbar:!1,shouldMeasure:A&&!L},n.createElement(h.ToolWidgetResizeDetector,{onWidthChange:this._handleInnerMeasure},!b&&n.Children.toArray([e.SymbolSearch&&n.createElement(d.ToolWidgetGroupWrap,{key:"symbol",className:2===k&&v.symbolSearch},n.createElement(e.SymbolSearch,{id:L?void 0:f.HeaderToolbarComponentIds.SymbolSearch,isActionsVisible:a.allowSymbolSearchSpread,isExpanded:2===k,onFocus:this._activateSymbolSearchMode,onBlur:this._activateNormalMode,maxWidth:W})),e.DateRange&&n.createElement(d.ToolWidgetGroupWrap,{key:"range"},n.createElement(e.DateRange,null)),e.Intervals&&1===k&&n.createElement(d.ToolWidgetGroupWrap,{key:"intervals"},n.createElement(e.Intervals,{id:L?void 0:f.HeaderToolbarComponentIds.Intervals,isShownQuicks:a.allowFavoriting,isFavoritingAllowed:a.allowFavoriting,displayMode:r,isFake:L})),e.Bars&&1===k&&n.createElement(d.ToolWidgetGroupWrap,{key:"styles"},n.createElement(e.Bars,{id:L?void 0:f.HeaderToolbarComponentIds.ChartStyles,isShownQuicks:a.allowFavoriting,isFavoritingAllowed:a.allowFavoriting,displayMode:r,isFake:L})),e.Compare&&1===k&&n.createElement(d.ToolWidgetGroupWrap,{key:"compare"},n.createElement(e.Compare,{id:L?void 0:f.HeaderToolbarComponentIds.Compare,className:v.button,displayMode:r})),1===k&&(e.Compare||e.Indicators)&&n.createElement(d.ToolWidgetGroupWrap,{key:"study"},n.createElement("div",{className:v.subGroup},e.Indicators&&n.createElement(e.Indicators,{id:L?void 0:f.HeaderToolbarComponentIds.Indicators,className:v.button,studyMarket:g,displayMode:r
}),e.Templates&&n.createElement(e.Templates,{id:L?void 0:f.HeaderToolbarComponentIds.StudyTemplates,isShownQuicks:a.allowFavoriting,isFavoritingAllowed:a.allowFavoriting,displayMode:r,stateSyncEmitter:y,isFake:L}))),1===k&&e.Alert&&n.createElement(d.ToolWidgetGroupWrap,{key:"alert"},n.createElement(e.Alert,{id:L?void 0:f.HeaderToolbarComponentIds.Alerts,className:v.button,displayMode:r})),1===k&&e.AlertReferral&&n.createElement(d.ToolWidgetGroupWrap,{key:"alert-referral"},n.createElement(e.AlertReferral,{className:v.button,displayMode:r})),1===k&&a.showIdeasButton&&e.Ideas&&n.createElement(d.ToolWidgetGroupWrap,{key:"charts"},n.createElement(e.Ideas,{isShownSettings:!l.enabled("widget")&&!!window.user,displayMode:r})),e.Replay&&1===k&&n.createElement(d.ToolWidgetGroupWrap,{key:"replay"},n.createElement(e.Replay,{className:v.button,displayMode:r})),e.UndoRedo&&1===k&&n.createElement(d.ToolWidgetGroupWrap,{key:"undo-redo"},n.createElement(e.UndoRedo,{id:L?void 0:f.HeaderToolbarComponentIds.UndoRedo})),e.ScalePercentage&&n.createElement(d.ToolWidgetGroupWrap,{key:"percentage"},n.createElement(e.ScalePercentage,null)),e.ScaleLogarithm&&n.createElement(d.ToolWidgetGroupWrap,{key:"logarithm"},n.createElement(e.ScaleLogarithm,null))].concat(M)),1===k?o(n.Children.toArray([b&&n.createElement(d.ToolWidgetGroupWrap,{key:"view-only-badge"},n.createElement(p.ToolWidgetViewOnlyBadge,null)),n.createElement(d.ToolWidgetGroupWrap,{key:"gap",className:s(v.fill)}),!b&&e.Layout&&n.createElement(d.ToolWidgetGroupWrap,{key:"layout"},n.createElement(e.Layout,{id:L?void 0:f.HeaderToolbarComponentIds.Layouts})),e.Screenshot&&!a.accentScreenshotButton&&n.createElement(d.ToolWidgetGroupWrap,{key:"screenshot"},n.createElement(e.Screenshot,{className:v.iconButton})),e.SaveLoad&&!(b&&_)&&n.createElement(d.ToolWidgetGroupWrap,{key:"save-load-right"},n.createElement(e.SaveLoad,{id:L?void 0:f.HeaderToolbarComponentIds.SaveLoad,chartSaver:c,isReadOnly:b,displayMode:r,isFake:L,stateSyncEmitter:S})),e.SaveLoadReferral&&n.createElement(d.ToolWidgetGroupWrap,{key:"save-load-referral"},n.createElement(e.SaveLoadReferral,{isReadOnly:b,displayMode:r})),a.showLaunchInPopupButton&&e.OpenPopup&&n.createElement(d.ToolWidgetGroupWrap,{key:"popup"},n.createElement(e.OpenPopup,{className:s(v.iconButton,v.popupButton)})),e.Screenshot&&a.accentScreenshotButton&&n.createElement(d.ToolWidgetGroupWrap,{key:"blue-screenshot"},n.createElement(e.Screenshot,{color:"blue",className:v.iconButton})),!b&&e.Properties&&n.createElement(d.ToolWidgetGroupWrap,{key:"properties"},n.createElement(e.Properties,{id:L?void 0:f.HeaderToolbarComponentIds.Properties,className:v.iconButton})),!b&&e.Fullscreen&&n.createElement(d.ToolWidgetGroupWrap,{key:"fullscreen"},n.createElement(e.Fullscreen,null))].concat(O))):[n.createElement(d.ToolWidgetGroupWrap,{key:"gap",className:s(v.fill,2===k&&v.minimalPriority)}),n.createElement(d.ToolWidgetGroupWrap,{key:"symbol-search-close"},n.createElement(u.ToolWidgetSymbolSearchCloseButton,{className:v.iconButton}))])))},e.prototype._setMode=function(t){
this.setState({mode:t})},e.contextTypes={tools:r.object.isRequired},e}(n.PureComponent),e.ToolbarInner=g},3068:function(t,e,i){"use strict";function o(t){var e,i=t.children,o=t.className,s=t.noLeftDecoration,l=t.noRightDecoration,c=t.noMinimalWidth;return a.createElement("div",{className:n(o,r.group,(e={},e[r.noMinimalWidth]=c,e[r.noLeftDecoration]=s,e[r.noRightDecoration]=l,e))},i)}var a,n,r;Object.defineProperty(e,"__esModule",{value:!0}),a=i(46),n=i(405),r=i(3069),e.ToolWidgetGroupWrap=o},3069:function(t,e){t.exports={group:"group-wWM3zP_M-",noLeftDecoration:"noLeftDecoration-15F5a1TB-",noRightDecoration:"noRightDecoration-2GcAAgVb-",noMinimalWidth:"noMinimalWidth-1sbl_ff5-"}},3070:function(t,e,i){"use strict";var o,a,n,r,s;Object.defineProperty(e,"__esModule",{value:!0}),o=i(4),a=i(46),n=i(456),r=i(3071),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._handleMeasure=function(t){var i=t.width;e.props.onWidthChange(i)},e}return o.__extends(e,t),e.prototype.render=function(){var t=this.props.children;return a.createElement(n,{onMeasure:this._handleMeasure,whitelist:["width"]},a.createElement("div",{className:r.wrap},t))},e}(a.PureComponent),e.ToolWidgetResizeDetector=s},3071:function(t,e){t.exports={"css-value-header-toolbar-height":"38px",wrap:"wrap-3tiHesTk-"}},3072:function(t,e,i){"use strict";function o(t){return n.createElement(r.ToolWidgetButton,a.__assign({},t,{forceInteractive:!0,icon:s}))}var a,n,r,s;Object.defineProperty(e,"__esModule",{value:!0}),a=i(4),n=i(46),r=i(1913),s=i(3073),e.ToolWidgetSymbolSearchCloseButton=o},3073:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17"><path fill="none" stroke="currentColor" d="M1 1l15 15M1 16L16 1"/></svg>'},3074:function(t,e,i){"use strict";function o(){return a.createElement("div",{className:r.wrap},a.createElement(n.Icon,{className:r.icon,icon:s}),l.text)}var a,n,r,s,l;Object.defineProperty(e,"__esModule",{value:!0}),i(2),a=i(46),n=i(1162),r=i(3075),s=i(683),l={text:window.t("View Only Mode")},e.ToolWidgetViewOnlyBadge=o},3075:function(t,e){t.exports={wrap:"wrap-3K4w_7te-",icon:"icon-1dNdRXKB-"}},3076:function(t,e,i){"use strict";var o,a,n,r,s,l,c,d,h,u,p;Object.defineProperty(e,"__esModule",{value:!0}),o=i(4),a=i(46),n=i(187),r=i(405),s=i(456),l=i(1162),c=i(695),d=i(3077),h=i(17),u=i(2423),p=function(t){function e(e){var i=t.call(this,e)||this;return i._wrapMeasureRef=null,i._contentMeasureRef=null,i._handleScrollLeft=function(){i.animateTo(Math.max(0,i.currentPosition()-(i.state.widthWrap-50)))},i._handleScrollRight=function(){i.animateTo(Math.min((i.state.widthContent||0)-(i.state.widthWrap||0),i.currentPosition()+(i.state.widthWrap-50)))},i._handleResizeWrap=function(t){var e=t.width;i.setState({widthWrap:e}),i._checkButtonsVisibility()},i._handleResizeContent=function(t){var e=t.width;i.setState({widthContent:e})},i._handleScroll=function(){var t=i.props.onScroll;t&&t(i.currentPosition(),i.isAtLeft(),i.isAtRight()),i._checkButtonsVisibility()},
i._checkButtonsVisibility=function(){var t,e,o,a,n;(i.props.isVisibleButtons||i.props.isVisibleFade)&&(t=i.state,e=t.isVisibleLeftButton,o=t.isVisibleRightButton,a=i.isAtLeft(),n=i.isAtRight(),a||e?a&&e&&i.setState({isVisibleLeftButton:!1}):i.setState({isVisibleLeftButton:!0}),n||o?n&&o&&i.setState({isVisibleRightButton:!1}):i.setState({isVisibleRightButton:!0}))},i._setWrapMeasureRef=function(t){i._wrapMeasureRef=t},i._setContentMeasureRef=function(t){i._contentMeasureRef=t},i.state={widthContent:0,widthWrap:0,isVisibleRightButton:!1,isVisibleLeftButton:!1},i}return o.__extends(e,t),e.prototype.componentDidMount=function(){this._checkButtonsVisibility()},e.prototype.componentDidUpdate=function(t,e){e.widthWrap===this.state.widthWrap&&e.widthContent===this.state.widthContent||this._handleScroll(),this.props.shouldMeasure&&this._wrapMeasureRef&&this._contentMeasureRef&&(this._wrapMeasureRef.measure(),this._contentMeasureRef.measure())},e.prototype.currentPosition=function(){return this._scroll?this._scroll.scrollLeft:0},e.prototype.isAtLeft=function(){return this.currentPosition()<=1},e.prototype.isAtRight=function(){return this.currentPosition()+this.state.widthWrap>=this.state.widthContent-1},e.prototype.animateTo=function(t,e){if(void 0===e&&(e=h.dur),this._scroll){var i=n.findDOMNode(this._scroll);c.doAnimate({onStep:function(t,e){i.scrollLeft=Math.round(e)},from:i.scrollLeft,to:Math.round(t),easing:h.easingFunc.easeInOutCubic,duration:e})}},e.prototype.render=function(){var t,e,i,o,n,c=this,h=this.props,p=h.children,m=h.isVisibleScrollbar,v=h.isVisibleFade,f=h.isVisibleButtons,_=h.shouldMeasure,g=this.state,b=g.widthContent,y=g.widthWrap,S=g.isVisibleRightButton,C=g.isVisibleLeftButton;return a.createElement(s,{whitelist:["width"],onMeasure:this._handleResizeWrap,shouldMeasure:_,ref:this._setWrapMeasureRef},a.createElement("div",{className:d.wrap},a.createElement("div",{className:r(d.scrollWrap,(t={},t[d.noScrollBar]=!m,t)),onScroll:this._handleScroll,ref:function(t){return c._scroll=t}},a.createElement(s,{onMeasure:this._handleResizeContent,whitelist:["width"],shouldMeasure:_,ref:this._setContentMeasureRef},a.createElement("div",{className:d.content},p))),v&&a.createElement("div",{className:r(d.fadeLeft,(e={},e[d.isVisible]=C&&b>y,e))}),v&&a.createElement("div",{className:r(d.fadeRight,(i={},i[d.isVisible]=S&&b>y,i))}),f&&a.createElement("div",{className:r(d.scrollLeft,(o={},o[d.isVisible]=C&&b>y,o)),onClick:this._handleScrollLeft},a.createElement("div",{className:d.iconWrap},a.createElement(l.Icon,{icon:u,className:d.icon}))),f&&a.createElement("div",{className:r(d.scrollRight,(n={},n[d.isVisible]=S&&b>y,n)),onClick:this._handleScrollRight},a.createElement("div",{className:d.iconWrap},a.createElement(l.Icon,{icon:u,className:d.icon})))))},e.defaultProps={isVisibleScrollbar:!0,shouldMeasure:!0},e}(a.PureComponent),e.HorizontalScroll=p},3077:function(t,e){t.exports={wrap:"wrap-1GG7GnNO-",scrollWrap:"scrollWrap-1icOiezT-",noScrollBar:"noScrollBar-2zw2auFK-",content:"content-3_f7yH29-",icon:"icon-2fZsO52g-",
scrollLeft:"scrollLeft-3OUcqYWy-",scrollRight:"scrollRight-UDsPWprP-",isVisible:"isVisible-zZk7F7wr-",iconWrap:"iconWrap-1U8J-Qkw-",fadeLeft:"fadeLeft-31arUEZY-",fadeRight:"fadeRight-36gcjOQb-"}},3078:function(t,e){t.exports={fake:"fake-37paHC6T-",inner:"inner-v8eiKwdM-",subGroup:"subGroup-1JpgB9zD-",fill:"fill-2axUON87-",minimalPriority:"minimalPriority-1MGEuVHu-",button:"button-3xrjDzA4-",iconButton:"iconButton-3vyD3BPg-",hidden:"hidden-2kSvETGo-",symbolSearch:"symbolSearch-3I4QF1U_-"}},3079:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t.SymbolSearch="header-toolbar-symbol-search",t.Intervals="header-toolbar-intervals",t.ChartStyles="header-toolbar-chart-styles",t.Compare="header-toolbar-compare",t.Indicators="header-toolbar-indicators",t.StudyTemplates="header-toolbar-study-templates",t.Alerts="header-toolbar-alerts",t.Layouts="header-toolbar-layouts",t.SaveLoad="header-toolbar-save-load",t.UndoRedo="header-toolbar-undo-redo",t.Properties="header-toolbar-properties"}(e.HeaderToolbarComponentIds||(e.HeaderToolbarComponentIds={}))},3080:function(t,e,i){"use strict";var o,a,n;Object.defineProperty(e,"__esModule",{value:!0}),o=i(4),a=i(2048),n=function(t){function e(e,i,o){return void 0===o&&(o=[]),t.call(this,e,i,"FAVORITE_CHART_STYLES_CHANGED","StyleWidget.quicks",o)||this}return o.__extends(e,t),e}(a.CommonJsonStoreService),e.FavoriteChartStylesService=n},3081:function(t,e,i){"use strict";var o,a,n,r,s;Object.defineProperty(e,"__esModule",{value:!0}),o=i(4),a=i(523),n=i(2048),r=i(103),s=function(t){function e(e,i,o){return t.call(this,e,i,"FAVORITE_INTERVALS_CHANGED","IntervalWidget.quicks",o)||this}return o.__extends(e,t),e.prototype._serialize=function(t){return a.convertIntervalsToObject(t.map(a.normalizeIntervalString))},e.prototype._deserialize=function(t){return r(Object.keys(t).map(a.normalizeIntervalString))},e}(n.AbstractJsonStoreService),e.FavoriteIntervalsService=s},3082:function(t,e,i){"use strict";var o,a,n,r,s,l,c;Object.defineProperty(e,"__esModule",{value:!0}),o=i(4),i(133),a=i(523),n=i(477),r=i(25),s=i(2048),l=i(103),c=function(t){function e(e,i,o){return void 0===o&&(o=[]),t.call(this,e,i,"CUSTOM_INTERVALS_CHANGED","IntervalWidget.intervals",o)||this}return o.__extends(e,t),e.prototype.set=function(e){var i=this;n("customIntervals"),window.TradingView.runOrGoPro(function(){return t.prototype.set.call(i,e)},r.ProductFeatures.CUSTOM_INTERVALS,{feature:"customIntervals"})},e.prototype._serialize=function(t){return a.convertIntervalsToObject(t.map(a.normalizeIntervalString))},e.prototype._deserialize=function(t){return l(Object.keys(t).map(a.normalizeIntervalString))},e}(s.AbstractJsonStoreService),e.CustomIntervalsService=c},3083:function(t,e){t.exports={"css-value-header-toolbar-height":"38px",toolbar:"toolbar-2n2cwgp5-",isHidden:"isHidden-GTob3P_C-",overflowWrap:"overflowWrap-PWdgT-U_-",customButton:"customButton--jqJTfH5-",hovered:"hovered-1mGRUp3y-"}},3084:function(t,e){t.exports={"css-value-header-toolbar-height":"38px"}},3085:function(t,e,i){
"use strict";function o(t){var e,i,n;if(o.instance)return o.instance;o.instance=this,e=this,a.symbol.subscribe(this._onSymbolChange.bind(this),{callWithLast:!0}),t.metaInfo.name.subscribe(this.updateView.bind(this)),this._chartWidgetCollection=t,this._notificationCount=0,this._tab_hidden=!1,void 0!==document.hidden?(i="hidden",n="visibilitychange"):void 0!==document.mozHidden?(i="mozHidden",n="mozvisibilitychange"):void 0!==document.msHidden?(i="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden&&(i="webkitHidden",n="webkitvisibilitychange"),$(document).bind(n,function(){e._tab_hidden=document[i],e._tab_hidden||(e._notificationCount=0,setTimeout(function(){e.updateView()},1e3))})}var a=i(131),n=i(18).PriceFormatter;o.prototype.updateView=function(){var t,e,i=this._chartWidgetCollection&&this._chartWidgetCollection.metaInfo.name.value(),o=this._quoteData,a=[];this._symbol&&(t=o&&o.short_name||(this._symbol||"").replace(/\w+:/g,""),o&&o.last_price&&(this._formatter||(this._formatter=new n(o.pricescale||100,o.minmov||1,o.fractional,o.minmove2)),t+=": "+this._formatter.format(o.last_price),e=o.change_percent,e>0?t+=" ▲+"+e+"%":e<0?t+=" ▼−"+Math.abs(e)+"%":0===e&&(t+=" 0%")),a.push(t)),i&&a.push(i),0===a.length&&a.push("New Chart"),document.title=a.join(" — ")+" — TradingView"},o.prototype.addNotification=function(t){this._tab_hidden&&(this._notificationCount+=t||0),this.updateView()},o.prototype._onSymbolChange=function(t){var e=this;this._quoteData&&this._quoteData.original_name!==t&&this._quoteData.full_name!==t&&(delete this._quoteData,delete this._formatter),this._symbol&&(quoteSessionMultiplexerInstance.simple.unsubscribe("ua-title",this._symbol),delete this._symbol),t&&(this._symbol=t,quoteSessionMultiplexerInstance.simple.subscribe("ua-title",this._symbol,function(t){e._quoteData=t&&t.values,e.updateView()})),this.updateView()},o.prototype._symbol="",t.exports=o},3086:function(t,e,i){"use strict";var o,a;Object.defineProperty(e,"__esModule",{value:!0}),o=i(3),a=function(){function t(t,e,i){this._hasChanges=!1,this._undoHistory=t,this._chartSaver=e,this._globalEvents=i,this._onValueChanged=new o,this._subscribe()}return t.prototype.destroy=function(){this._unsubscribe(),this._onValueChanged.destroy()},t.prototype.hasChanges=function(){return this._hasChanges},t.prototype.getOnChange=function(){return this._onValueChanged},t.prototype._subscribe=function(){this._globalEvents.subscribe("chart_loaded",this._handleChartLoaded,this),this._undoHistory.undoStack().onChange().subscribe(this,this._handleChangeUndoStack),this._chartSaver.chartSaved().subscribe(this,this._handleChartSaved)},t.prototype._unsubscribe=function(){this._globalEvents.unsubscribe("chart_loaded",this._handleChartLoaded,this),this._undoHistory.undoStack().onChange().unsubscribe(this,this._handleChangeUndoStack),this._chartSaver.chartSaved().unsubscribe(this,this._handleChartSaved)},t.prototype._setChanges=function(t){this._hasChanges=t,this._onValueChanged.fire(t)},t.prototype._handleChartLoaded=function(){this._setChanges(!1)},
t.prototype._handleChangeUndoStack=function(){var t=this._undoHistory.undoStack().head();t&&t.customFlag("doesnt_affect_save")||this._setChanges(!0)},t.prototype._handleChartSaved=function(t){t&&this._setChanges(!1)},t}(),e.ChartChangesWatcher=a}});